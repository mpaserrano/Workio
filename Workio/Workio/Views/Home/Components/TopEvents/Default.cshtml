@using Workio.Models.Events;
@model ICollection<Event>;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<style>
    .card {
	    height: auto;
    }
</style>

<div>
    <div class="d-flex flex-row align-items-center">
        <h4 class="fw-bold me-auto">@localizer.Get("TopEvents")</h4>
    </div>
</div>

<div class="owl-carousel owl-theme">
    @foreach (Event @event in Model)
    {
        @await Component.InvokeAsync("EventPreviewCard", new {@event = @event})
    }
</div>

@if(!Model.Any()){
    <p>@localizer.Get("NoData")</p>
}


<script type="text/javascript" on-content-loaded="true">
    $(document).ready(function(){
        $(".owl-carousel").owlCarousel({
            items: 1,
            margin: 15,
            autoplay: false,
            onInitialized: function() {
			    //setCardHeight();
            },
			onResized: function() {
			    //setCardHeight();
            }
        });

        /*function setCardHeight() {
            console.log("ok")
		    let maxHeight = 0;
			$('.owl-carousel .card').each(function(){
				let height = $(this).height();
				maxHeight = height > maxHeight ? height : maxHeight;
			});
			$('.owl-carousel .card').height(maxHeight);
	    }*/
    });
</script>